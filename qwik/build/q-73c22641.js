import{d as s,F as c,H as l,g as o}from"./q-71956c83.js";const i=[{text:"Supabase",id:"supabase",level:1},{text:"Server-side",id:"server-side",level:2}],d={title:"Qwik City and Supabase",meta:[{name:"keywords",content:"supabase, db"}],styles:[],links:[],frontmatter:{contributors:["manucorporat","hamatoyogi"]}},h={title:"Qwik City and Supabase",keywords:"supabase, db",contributors:["manucorporat","hamatoyogi"]};function r(n){const e=Object.assign({h1:"h1",a:"a",span:"span",p:"p",code:"code",div:"div",pre:"pre",blockquote:"blockquote",h2:"h2"},n.components);return l(o,{children:[l(e.h1,{id:"supabase",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#supabase",children:l(e.span,{class:"icon icon-link"})}),"Supabase"]}),`
`,l(e.p,{children:["The ",l(e.code,{children:"Supabase"})," JS library plays nicely with the server-side APIs from Qwik such as ",l(e.code,{children:"routeLoader$"}),", ",l(e.code,{children:"routeAction$"})," or ",l(e.code,{children:"server$"}),"."]}),`
`,l(e.p,{children:"First, install supabase in your Qwik project:"}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"bash","data-theme":"default",children:l(e.code,{"data-language":"bash","data-theme":"default",children:l(e.span,{class:"line",children:[l(e.span,{style:{color:"#DCDCAA"},children:"npm"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"install"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"@supabase/supabase-js"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"supabase-auth-helpers-qwik"})]})})})}),`
`,l(e.p,{children:["The second step would be to add configure the ",l(e.code,{children:"PUBLIC_SUPABASE_URL"})," and ",l(e.code,{children:"PUBLIC_SUPABASE_ANON_KEY"})," as environment variables to ",l(e.code,{children:".env"}),' file, the "anon" key is safe to be exposed in the client-side.']}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"bash","data-theme":"default",children:l(e.code,{"data-language":"bash","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#9CDCFE"},children:"PUBLIC_SUPABASE_URL"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#CE9178"},children:"https://xxxxxxx.supabase.co"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#9CDCFE"},children:"PUBLIC_SUPABASE_ANON_KEY"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#CE9178"},children:"eyJhb......."})]})]})})}),`
`,l(e.p,{children:["You should be able to get this values from the Supabase dashboard, create a new ",l(e.code,{children:".env.local"})," file at the root of the project and paste them there."]}),`
`,l(e.blockquote,{children:[`
`,l(e.p,{children:["Note: It's possible to use Supabase with Qwik completely client-side, however, you would lose some of the performance benefits that you can acheive with leveraging the server. For a working example and code head over to ",l(e.a,{href:"https://github.com/hamatoyogi/qwik-supabase-example",children:"this repository"}),"."]}),`
`]}),`
`,l(e.h2,{id:"server-side",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#server-side",children:l(e.span,{class:"icon icon-link"})}),"Server-side"]}),`
`,l(e.p,{children:["The Supabase client can now be used server-side - in ",l(e.code,{children:"routeLoader"}),"s and ",l(e.code,{children:"routeAction"}),"s - by calling the ",l(e.code,{children:"createServerClient"})," function."]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"routeLoader$"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik-city'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"createServerClient"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'supabase-auth-helpers-qwik'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"useDBTest"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"routeLoader$"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"requestEv"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"supabaseClient"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"createServerClient"}),l(e.span,{style:{color:"#D4D4D4"},children:"("})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#9CDCFE"},children:"requestEv"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"env"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"get"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:'"PUBLIC_SUPABASE_URL"'}),l(e.span,{style:{color:"#D4D4D4"},children:")!,"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#9CDCFE"},children:"requestEv"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"env"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"get"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:'"PUBLIC_SUPABASE_ANON_KEY"'}),l(e.span,{style:{color:"#D4D4D4"},children:")!,"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#9CDCFE"},children:"requestEv"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  );"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#4FC1FF"},children:"data"}),l(e.span,{style:{color:"#D4D4D4"},children:" } = "}),l(e.span,{style:{color:"#C586C0"},children:"await"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"supabaseClient"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'test'"}),l(e.span,{style:{color:"#D4D4D4"},children:")."}),l(e.span,{style:{color:"#DCDCAA"},children:"select"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'*'"}),l(e.span,{style:{color:"#D4D4D4"},children:")"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"data"}),l(e.span,{style:{color:"#D4D4D4"},children:" };"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"});"})})]})})})]})}function a(n={}){const{wrapper:e}=n.components||{};return e?l(e,Object.assign({},n,{children:l(r,n)})):r(n)}const D=()=>s(c,{children:s(a,{},3,null)},3,"EtNO2sOO");export{D as default,h as frontmatter,d as head,i as headings};
