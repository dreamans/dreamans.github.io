import{d as r,F as s,H as l,g as c}from"./q-71956c83.js";const d=[{text:"Nested layouts",id:"nested-layouts",level:1},{text:"Example",id:"example",level:2},{text:"Routes directory",id:"routes-directory",level:3},{text:"src/routes/layout.tsx",id:"srcrouteslayouttsx",level:3},{text:"src/routes/index.tsx",id:"srcroutesindextsx",level:3},{text:"src/routes/about/index.tsx",id:"srcroutesaboutindextsx",level:3}],i={title:"Qwik City - Layout & Middleware",meta:[],styles:[],links:[],frontmatter:{contributors:["manucorporat","adamdbradley","Oyemade","mhevery","nnelgxorz","the-r3aper7"]}},h={title:"Qwik City - Layout & Middleware",contributors:["manucorporat","adamdbradley","Oyemade","mhevery","nnelgxorz","the-r3aper7"]};function o(n){const e=Object.assign({h1:"h1",a:"a",span:"span",p:"p",strong:"strong",ul:"ul",li:"li",code:"code",h2:"h2",pre:"pre",blockquote:"blockquote",h3:"h3",div:"div"},n.components);return l(c,{children:[l(e.h1,{id:"nested-layouts",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#nested-layouts",children:l(e.span,{class:"icon icon-link"})}),"Nested layouts"]}),`
`,l(e.p,{children:["Layouts provide ",l(e.strong,{children:"nested UI and request handling (middleware)"})," to a set of routes:"]}),`
`,l(e.ul,{children:[`
`,l(e.li,{children:[l(e.strong,{children:"Shared request handling"}),": Accomplished by adding an ",l(e.code,{children:"onRequest"})," method."]}),`
`,l(e.li,{children:[l(e.strong,{children:"Shared UI"}),": Accomplished by ",l(e.code,{children:"export default"})," a Qwik component."]}),`
`]}),`
`,l(e.h2,{id:"example",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#example",children:l(e.span,{class:"icon icon-link"})}),"Example"]}),`
`,l(e.p,{children:"Let's put together all the concepts we have learned so far to build a full app."}),`
`,l(e.p,{children:["In the proposed example, we have a site with 2 pages: ",l(e.code,{children:"https://example.com"})," and ",l(e.code,{children:"https://example.com/about"}),", and we want to add a common header and footer to all the pages, the only difference between the pages is the content in the middle."]}),`
`,l(e.pre,{children:l(e.code,{children:`┌───────────────────────────────────────────────────┐
│ Header                                            │
├─────────┬─────────────────────────────────────────┤
│ Menu    │ <ROUTE_SPECIFIC_CONTENT>                │
│ - home  │                                         │
│ - about │                                         │
│         │                                         │
├─────────┴─────────────────────────────────────────┤
│ Footer                                            │
└───────────────────────────────────────────────────┘
`})}),`
`,l(e.p,{children:["First, we create three components: ",l(e.code,{children:"<Header>"}),", ",l(e.code,{children:"<Footer>"}),", and ",l(e.code,{children:"<Menu>"}),"."]}),`
`,l(e.blockquote,{children:[`
`,l(e.p,{children:["The developer could copy-paste these components manually into each page component, but that is repetitive and error-prone, ",l(e.strong,{children:"instead, we can use layouts to automatically reuse common parts."})]}),`
`]}),`
`,l(e.h3,{id:"routes-directory",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#routes-directory",children:l(e.span,{class:"icon icon-link"})}),"Routes directory"]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"bash","data-theme":"default",children:l(e.code,{"data-language":"bash","data-theme":"default",children:[l(e.span,{class:"line",children:l(e.span,{style:{color:"#DCDCAA"},children:"src/"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#DCDCAA"},children:"├──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"components/"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#DCDCAA"},children:"│"}),l(e.span,{style:{color:"#D4D4D4"},children:"   "}),l(e.span,{style:{color:"#CE9178"},children:"├──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"header.tsx"}),l(e.span,{style:{color:"#D4D4D4"},children:"         "}),l(e.span,{style:{color:"#6A9955"},children:"# Header component implementation"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#DCDCAA"},children:"│"}),l(e.span,{style:{color:"#D4D4D4"},children:"   "}),l(e.span,{style:{color:"#CE9178"},children:"├──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"footer.tsx"}),l(e.span,{style:{color:"#D4D4D4"},children:"         "}),l(e.span,{style:{color:"#6A9955"},children:"# Footer component implementation"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#DCDCAA"},children:"│"}),l(e.span,{style:{color:"#D4D4D4"},children:"   "}),l(e.span,{style:{color:"#CE9178"},children:"└──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"menu.tsx"}),l(e.span,{style:{color:"#D4D4D4"},children:"           "}),l(e.span,{style:{color:"#6A9955"},children:"# Menu component implementation"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#DCDCAA"},children:"└──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"routes/"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#DCDCAA"},children:"├──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"layout.tsx"}),l(e.span,{style:{color:"#D4D4D4"},children:"         "}),l(e.span,{style:{color:"#6A9955"},children:"# Layout implementation using: <Header>, <Footer>, and <Menu>"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#DCDCAA"},children:"├──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"about/"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#DCDCAA"},children:"│"}),l(e.span,{style:{color:"#D4D4D4"},children:"   "}),l(e.span,{style:{color:"#CE9178"},children:"└──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"index.tsx"}),l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#6A9955"},children:"# https://example.com/about"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#DCDCAA"},children:"└──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"index.tsx"}),l(e.span,{style:{color:"#D4D4D4"},children:"          "}),l(e.span,{style:{color:"#6A9955"},children:"# https://example.com"})]})]})})}),`
`,l(e.h3,{id:"srcrouteslayouttsx",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#srcrouteslayouttsx",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"src/routes/layout.tsx"})]}),`
`,l(e.p,{children:["It will be used for all routes under the ",l(e.code,{children:"src/routes"})," directory. It will render the ",l(e.code,{children:"Header"}),", ",l(e.code,{children:"Menu"}),", and ",l(e.code,{children:"Footer"})," components, and also render the nested routes under the ",l(e.code,{children:"Slot"})," component."]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:[l(e.div,{"data-rehype-pretty-code-title":"","data-language":"tsx","data-theme":"default",children:"src/routes/layout.tsx"}),l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#C586C0"},children:"default"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#808080"},children:"<>"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#4EC9B0"},children:"Header"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"/>"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#4EC9B0"},children:"Menu"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"/>"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#4EC9B0"},children:"Slot"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"/>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#6A9955"},children:"/* <== This is where the route will be inserted */"}),l(e.span,{style:{color:"#569CD6"},children:"}"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#4EC9B0"},children:"Footer"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"/>"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#808080"},children:"</>"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  );"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"});"})})]})})]}),`
`,l(e.h3,{id:"srcroutesindextsx",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#srcroutesindextsx",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"src/routes/index.tsx"})]}),`
`,l(e.p,{children:["This is the main route for the site. It will be rendered under the ",l(e.code,{children:"Slot"})," component in the ",l(e.code,{children:"src/routes/layout.tsx"})," file, so even though it doesn't have any of the ",l(e.code,{children:"Header"}),", ",l(e.code,{children:"Menu"}),", or ",l(e.code,{children:"Footer"})," components, it will still be rendered with them."]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:[l(e.div,{"data-rehype-pretty-code-title":"","data-language":"tsx","data-theme":"default",children:"src/routes/index.tsx"}),l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#C586C0"},children:"default"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"<>"}),l(e.span,{style:{color:"#D4D4D4"},children:"Home"}),l(e.span,{style:{color:"#808080"},children:"</>"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"});"})})]})})]}),`
`,l(e.h3,{id:"srcroutesaboutindextsx",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#srcroutesaboutindextsx",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"src/routes/about/index.tsx"})]}),`
`,l(e.p,{children:["Same as the ",l(e.code,{children:"src/routes/index.tsx"})," file, but for the ",l(e.code,{children:"about"})," route, similary it will be rendered under the ",l(e.code,{children:"Slot"})," component in the ",l(e.code,{children:"src/routes/layout.tsx"})," file, so even though it doesn't have any of the ",l(e.code,{children:"Header"}),", ",l(e.code,{children:"Menu"}),", or ",l(e.code,{children:"Footer"})," components, it will still be rendered with them."]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:[l(e.div,{"data-rehype-pretty-code-title":"","data-language":"tsx","data-theme":"default",children:"src/routes/about/index.tsx"}),l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#C586C0"},children:"default"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"<>"}),l(e.span,{style:{color:"#D4D4D4"},children:"About"}),l(e.span,{style:{color:"#808080"},children:"</>"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"});"})})]})})]}),`
`,l(e.p,{children:["When we run the app, Qwik will render the ",l(e.code,{children:"About"})," nested inside the ",l(e.code,{children:"RootLayout"})]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#4EC9B0"},children:"RootLayout"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#4EC9B0"},children:"AboutPage"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"/>"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#4EC9B0"},children:"RootLayout"}),l(e.span,{style:{color:"#808080"},children:">"})]})]})})})]})}function t(n={}){const{wrapper:e}=n.components||{};return e?l(e,Object.assign({},n,{children:l(o,n)})):o(n)}const p=()=>r(s,{children:r(t,{},3,null)},3,"WeodTQJC");export{p as default,h as frontmatter,i as head,d as headings};
