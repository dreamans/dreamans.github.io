import{d as r,F as o,H as l,g as i}from"./q-71956c83.js";import{C as n}from"./q-39a884a5.js";const d=[{text:"Tasks",id:"tasks",level:1},{text:"Lifecycle",id:"lifecycle",level:2},{text:"useTask$()",id:"usetask",level:2},{text:"On mount",id:"on-mount",level:3},{text:"track()",id:"track",level:3},{text:"track() as a function",id:"track-as-a-function",level:3},{text:"cleanup()",id:"cleanup",level:3},{text:"useVisibleTask$()",id:"usevisibletask",level:2},{text:"Option eagerness",id:"option-eagerness",level:3},{text:"Use Hook Rules",id:"use-hook-rules",level:2}],h={title:"Events",meta:[],styles:[],links:[],frontmatter:{contributors:["mhevery","manucorporat","wtlin1228","AnthonyPAlicea","the-r3aper7","sreeisalso","brunocrosier"]}},p={title:"Events",contributors:["mhevery","manucorporat","wtlin1228","AnthonyPAlicea","the-r3aper7","sreeisalso","brunocrosier"]};function c(s){const e=Object.assign({h1:"h1",a:"a",span:"span",p:"p",blockquote:"blockquote",strong:"strong",code:"code",ul:"ul",li:"li",h2:"h2",div:"div",pre:"pre",h3:"h3",em:"em"},s.components);return l(i,{children:[l(e.h1,{id:"tasks",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#tasks",children:l(e.span,{class:"icon icon-link"})}),"Tasks"]}),`
`,l(e.p,{children:"Tasks are meant for running asynchronous operations as part of component initialization or change of component state."}),`
`,l(e.blockquote,{children:[`
`,l(e.p,{children:[l(e.strong,{children:"Note"}),": Tasks are similar to ",l(e.code,{children:"useEffect()"})," in React, but there are enough differences that we did not want to call them the same so as not to bring preexisting expectations about how they work. The main differences are:"]}),`
`,l(e.ul,{children:[`
`,l(e.li,{children:"Tasks are asynchronous."}),`
`,l(e.li,{children:"Task run on server and browser."}),`
`,l(e.li,{children:"Tasks run before rendering and can block rendering."}),`
`]}),`
`]}),`
`,l(e.p,{children:[l(e.code,{children:"useTask$()"})," should be your default go-to API for running asynchronous (or synchronous) work as part of component initialization or state change. It is only when you can't achieve what you need with ",l(e.code,{children:"useTask$()"})," that you should consider using ",l(e.code,{children:"useVisibleTask$()"})," or ",l(e.code,{children:"useResource$()"}),"."]}),`
`,l(e.p,{children:["The basic use case for ",l(e.code,{children:"useTask$()"})," is to perform work on component initialization. ",l(e.code,{children:"useTask$()"})," has these properties:"]}),`
`,l(e.ul,{children:[`
`,l(e.li,{children:"It can run on either the server or in the browser."}),`
`,l(e.li,{children:"It runs before rendering and blocks rendering."}),`
`,l(e.li,{children:"If multiple tasks are running then they are run sequentially in the order they were registered. An asynchronous task will block the next task from running until it completes."}),`
`]}),`
`,l(e.p,{children:["Tasks can also be used to perform work when a component state changes. In this case, the task will rerun every time the tracked state changes. See: ",l(e.a,{href:"#track",children:l(e.code,{children:"track()"})}),"."]}),`
`,l(e.p,{children:["Sometimes a task needs to run only on the browser and after rendering, in that case, you should use ",l(e.a,{href:"#usevisibletask",children:l(e.code,{children:"useVisibleTask$()"})}),"."]}),`
`,l(e.p,{children:["Sometimes a task should fetch data asynchronously and produce a signal (and not block rendering), in that case, you should use ",l(e.a,{href:"#useresource",children:l(e.code,{children:"useResource$()"})}),"."]}),`
`,l(e.h2,{id:"lifecycle",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#lifecycle",children:l(e.span,{class:"icon icon-link"})}),"Lifecycle"]}),`
`,l(e.p,{children:["Thanks to ",l(e.a,{href:"/docs/concepts/resumable/",children:"Resumability"}),", component lifetime and its lifecycle extend across server and browser runtime. Sometimes the component will first be rendered in the server, and other times it could be rendered in the browser. However, in both cases, the lifecycle (order) will be the same, only its execution location will be in different environments (server vs browser)."]}),`
`,l(e.blockquote,{children:[`
`,l(e.p,{children:[l(e.strong,{children:"Note"}),': For systems that use hydration the execution of the application happens twice. Once on a server (SSR/SSG) and once on the browser (hydration). For this reason, many frameworks have "effects" which only execute on the browser. That means that the code that runs on the server is different than the code that runs on the browser. Qwik execution is unified, meaning if the code has already been executed on the server it does not re-execute it on the browser.']}),`
`]}),`
`,l(e.p,{children:l(e.strong,{children:"In Qwik, there are only 3 lifecycle stages:"})}),`
`,l(e.ul,{children:[`
`,l(e.li,{children:[l(e.code,{children:"Task"})," - run before rendering and also when tracked state changes. (Tasks run sequentially, and block rendering.)"]}),`
`,l(e.li,{children:[l(e.code,{children:"Render"})," - runs after ",l(e.code,{children:"TASK"})," and before ",l(e.code,{children:"VisibleTask"})]}),`
`,l(e.li,{children:[l(e.code,{children:"VisibleTask"})," - runs after ",l(e.code,{children:"Render"})," and when the component becomes visible"]}),`
`]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"bash","data-theme":"default",children:l(e.code,{"data-language":"bash","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{backgroundColor:"undefined",color:"undefined"},class:"word",children:"useTask$"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"-------"}),l(e.span,{style:{color:"#D4D4D4"},children:">"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{backgroundColor:"rgb(0 103 163 / 56%)",color:"rgb(175 255 255 / 100%)"},class:"word",children:"RENDER"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"---"}),l(e.span,{style:{color:"#D4D4D4"},children:">"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{"data-rehype-pretty-code-wrapper":!0,style:{backgroundColor:"rgb(100 50 255 / 35%)",color:"rgb(225 200 255 / 100%)"},class:"word",children:[l(e.span,{style:{},class:"",children:"useVisibleTask"}),l(e.span,{style:{},class:"",children:"$"})]})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"                            |"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"| "}),l(e.span,{style:{color:"#DCDCAA"},children:"---"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"SERVER"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"or"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"BROWSER"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"---"}),l(e.span,{style:{color:"#D4D4D4"},children:" | "}),l(e.span,{style:{color:"#DCDCAA"},children:"-----"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"BROWSER"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"-----"}),l(e.span,{style:{color:"#D4D4D4"},children:" |"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"                            |"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"                       "}),l(e.span,{style:{color:"#DCDCAA"},children:"pause"}),l(e.span,{style:{color:"#D4D4D4"},children:"|"}),l(e.span,{style:{color:"#DCDCAA"},children:"resume"})]})]})})}),`
`,l(e.p,{children:[l(e.strong,{children:"SERVER"}),": Usually ",l(e.strong,{children:"the life of a component starts on the server"})," (during SSR or SSG), in that case, the ",l(e.code,{children:"useTask$"})," and ",l(e.code,{children:"RENDER"})," will run in the server, and then the ",l(e.code,{children:"VisibleTask"})," will run in the browser, after the component is visible."]}),`
`,l(e.blockquote,{children:[`
`,l(e.p,{children:[l(e.strong,{children:"Notice"})," that because the component was mounted in the server, ",l(e.strong,{children:"only useVisibleTask$() runs in the browser"}),". This is because the browser continues the same lifecycle, that was paused in the server right after the render and resumed in the browser."]}),`
`]}),`
`,l(e.p,{children:[l(e.strong,{children:"BROWSER"}),': Sometimes a component will be first mounted/rendered in the browser, for example when the user SPA navigates to a new page, or a "modal" component first appears in the page. In that case, the lifecycle will run like this:']}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"bash","data-theme":"default",children:l(e.code,{"data-language":"bash","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{backgroundColor:"undefined",color:"undefined"},class:"word",children:"useTask$"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"--"}),l(e.span,{style:{color:"#D4D4D4"},children:">"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{backgroundColor:"rgb(0 103 163 / 56%)",color:"rgb(175 255 255 / 100%)"},class:"word",children:"RENDER"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"--"}),l(e.span,{style:{color:"#D4D4D4"},children:">"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{"data-rehype-pretty-code-wrapper":!0,style:{backgroundColor:"rgb(100 50 255 / 35%)",color:"rgb(225 200 255 / 100%)"},class:"word",children:[l(e.span,{style:{},class:"",children:"useVisibleTask"}),l(e.span,{style:{},class:"",children:"$"})]})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"| "}),l(e.span,{style:{color:"#DCDCAA"},children:"--------------"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"BROWSER"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"---------------"}),l(e.span,{style:{color:"#D4D4D4"},children:" |"})]})]})})}),`
`,l(e.blockquote,{children:[`
`,l(e.p,{children:[l(e.strong,{children:"Notice"})," that the lifecycle is exactly the same, but this time all the hooks run in the browser, and not in the server."]}),`
`]}),`
`,l(e.h2,{id:"usetask",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#usetask",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"useTask$()"})]}),`
`,l(e.ul,{children:[`
`,l(e.li,{children:[l(e.strong,{children:"When:"})," BEFORE component's first render, and when tracked state changes"]}),`
`,l(e.li,{children:[l(e.strong,{children:"Times:"})," at least once"]}),`
`,l(e.li,{children:[l(e.strong,{children:"Platform:"})," server and browser"]}),`
`]}),`
`,l(e.p,{children:[l(e.code,{children:"useTask$()"})," registers a hook to be executed upon component creation, it will run at least once either in the server or in the browser, depending on where the component is initially rendered."]}),`
`,l(e.p,{children:["Additionally, this task can be reactive and will re-execute when ",l(e.strong,{children:"tracked"})," ",l(e.a,{href:"/docs/components/state/",children:"state"})," changes."]}),`
`,l(e.p,{children:[l(e.strong,{children:"Notice that any subsequent re-execution of the task will always happen in the browser"}),", because reactivity is a browser-only thing."]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"bash","data-theme":"default",children:l(e.code,{"data-language":"bash","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"                      ("}),l(e.span,{style:{color:"#DCDCAA"},children:"state"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"change"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#DCDCAA"},children:"->"}),l(e.span,{style:{color:"#D4D4D4"},children:" (re-execute)"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"                                  "}),l(e.span,{style:{color:"#DCDCAA"},children:"^"}),l(e.span,{style:{color:"#D4D4D4"},children:"            |"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"                                  |            "}),l(e.span,{style:{color:"#DCDCAA"},children:"v"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{"data-rehype-pretty-code-wrapper":!0,style:{backgroundColor:"undefined",color:"undefined"},class:"word",children:[l(e.span,{style:{},class:"",children:"useTask$(track"}),l(e.span,{style:{},class:"",children:")"})]}),l(e.span,{style:{color:"#D4D4D4"},children:" -> "}),l(e.span,{style:{backgroundColor:"rgb(0 103 163 / 56%)",color:"rgb(175 255 255 / 100%)"},class:"word",children:"RENDER"}),l(e.span,{style:{color:"#D4D4D4"},children:" ->  "}),l(e.span,{style:{backgroundColor:"rgb(196 42 94 / 59%)",color:"rgb(255 225 225 / 100%)"},class:"word",children:"CLICK"}),l(e.span,{style:{color:"#D4D4D4"},children:"  -> "}),l(e.span,{"data-rehype-pretty-code-wrapper":!0,style:{backgroundColor:"undefined",color:"undefined"},class:"word",children:[l(e.span,{style:{},class:"",children:"useTask"}),l(e.span,{style:{},class:"",children:"$("}),l(e.span,{style:{},class:"",children:"track"}),l(e.span,{style:{},class:"",children:")"})]})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"                        |"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  | "}),l(e.span,{style:{color:"#DCDCAA"},children:"-----"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"SERVER"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"------"}),l(e.span,{style:{color:"#D4D4D4"},children:" | "}),l(e.span,{style:{color:"#DCDCAA"},children:"-----------"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"BROWSER"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"-----------"}),l(e.span,{style:{color:"#D4D4D4"},children:" |"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"                        |"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"                   "}),l(e.span,{style:{color:"#DCDCAA"},children:"pause"}),l(e.span,{style:{color:"#D4D4D4"},children:"|"}),l(e.span,{style:{color:"#DCDCAA"},children:"resume"})]})]})})}),`
`,l(e.blockquote,{children:[`
`,l(e.p,{children:["If ",l(e.code,{children:"useTask$()"})," does not track any state, it will run ",l(e.strong,{children:"exactly once"}),", either in the server ",l(e.strong,{children:"or"})," in the browser (",l(e.strong,{children:"not both"}),'), depending where the component is initially rendered. Effectively behaving like an "on-mount" hook.']}),`
`]}),`
`,l(e.p,{children:[l(e.code,{children:"useTask$()"})," will block the rendering of the component until after its async callback resolves, in other words, tasks execute sequentially even if they are asynchronous. (Only one task executes at a time / Tasks block rendering)."]}),`
`,l(e.p,{children:"Let's look at the simplest use case of the task to run some asynchronous work on component initialization."}),`
`,l(n,{src:"/src/routes/demo/tasks/use-task/index.tsx",style:{height:"6em"},children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"useTask$"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#C586C0"},children:"default"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"fibonacci"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:"<"}),l(e.span,{style:{color:"#4EC9B0"},children:"number"}),l(e.span,{style:{color:"#D4D4D4"},children:"[]>();"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"useTask$"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" () "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"size"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#B5CEA8"},children:"40"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"array"}),l(e.span,{style:{color:"#D4D4D4"},children:" = [];"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#9CDCFE"},children:"array"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"push"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"0"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#B5CEA8"},children:"1"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#C586C0"},children:"for"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#569CD6"},children:"let"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"i"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#9CDCFE"},children:"array"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"length"}),l(e.span,{style:{color:"#D4D4D4"},children:"; "}),l(e.span,{style:{color:"#9CDCFE"},children:"i"}),l(e.span,{style:{color:"#D4D4D4"},children:" < "}),l(e.span,{style:{color:"#9CDCFE"},children:"size"}),l(e.span,{style:{color:"#D4D4D4"},children:"; "}),l(e.span,{style:{color:"#9CDCFE"},children:"i"}),l(e.span,{style:{color:"#D4D4D4"},children:"++) {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#9CDCFE"},children:"array"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"push"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"array"}),l(e.span,{style:{color:"#D4D4D4"},children:"["}),l(e.span,{style:{color:"#9CDCFE"},children:"i"}),l(e.span,{style:{color:"#D4D4D4"},children:" - "}),l(e.span,{style:{color:"#B5CEA8"},children:"1"}),l(e.span,{style:{color:"#D4D4D4"},children:"] + "}),l(e.span,{style:{color:"#9CDCFE"},children:"array"}),l(e.span,{style:{color:"#D4D4D4"},children:"["}),l(e.span,{style:{color:"#9CDCFE"},children:"i"}),l(e.span,{style:{color:"#D4D4D4"},children:" - "}),l(e.span,{style:{color:"#B5CEA8"},children:"2"}),l(e.span,{style:{color:"#D4D4D4"},children:"]);"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#C586C0"},children:"await"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"delay"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"100"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"    }"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#9CDCFE"},children:"fibonacci"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#9CDCFE"},children:"array"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  });"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"p"}),l(e.span,{style:{color:"#808080"},children:">"}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"fibonacci"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:"?."}),l(e.span,{style:{color:"#DCDCAA"},children:"join"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"', '"}),l(e.span,{style:{color:"#D4D4D4"},children:")"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"p"}),l(e.span,{style:{color:"#808080"},children:">"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"});"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"delay"}),l(e.span,{style:{color:"#D4D4D4"},children:" = ("}),l(e.span,{style:{color:"#9CDCFE"},children:"time"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"number"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"new"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4EC9B0"},children:"Promise"}),l(e.span,{style:{color:"#D4D4D4"},children:"(("}),l(e.span,{style:{color:"#9CDCFE"},children:"res"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"setTimeout"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"res"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"time"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]})]})})})}),`
`,l(e.blockquote,{children:[`
`,l(e.p,{children:"In this example"}),`
`,l(e.ul,{children:[`
`,l(e.li,{children:["The ",l(e.code,{children:"useTask$()"})," computes the fibonacci number one entry per 100 ms. So 40 entries take 4 seconds to render.",`
`,l(e.ul,{children:[`
`,l(e.li,{children:["The ",l(e.code,{children:"useTask$()"})," executes on the server as part of the SSR (the result may be cached in CDN.)"]}),`
`,l(e.li,{children:["Because the ",l(e.code,{children:"useTask$()"})," blocks rendering, the rendered HTML page takes 4 seconds to render."]}),`
`]}),`
`]}),`
`,l(e.li,{children:["Because this task has no ",l(e.code,{children:"track()"})," it will never rerun, making it effectively an initialization code.",`
`,l(e.ul,{children:[`
`,l(e.li,{children:["Because this component only renders on the server, the ",l(e.code,{children:"useTask$()"})," will never run on the browser. (code will never download to browser.)"]}),`
`]}),`
`]}),`
`]}),`
`]}),`
`,l(e.blockquote,{children:[`
`,l(e.p,{children:["Notice that ",l(e.code,{children:"useTask$()"})," runs ",l(e.strong,{children:"BEFORE"})," the actual rendering and on the server. Therefore if you need to do DOM manipulation, use ",l(e.a,{href:"#usevisibletask",children:l(e.code,{children:"useVisibleTask$()"})})," instead, which runs on the browser after rendering."]}),`
`]}),`
`,l(e.p,{children:["Use ",l(e.code,{children:"useTask$()"})," when you need to:"]}),`
`,l(e.ul,{children:[`
`,l(e.li,{children:"Run async tasks before rendering"}),`
`,l(e.li,{children:"Run code only once before the component is first rendered"}),`
`,l(e.li,{children:"Programmatically run side-effect code when state changes"}),`
`]}),`
`,l(e.blockquote,{children:[`
`,l(e.p,{children:["Note, if you're thinking about load data (like using ",l(e.code,{children:"fetch()"}),") inside of ",l(e.code,{children:"useTask$"}),", consider using ",l(e.a,{href:"#useresource",children:l(e.code,{children:"useResource$()"})})," instead. This API is more efficient in terms of leveraging SSR streaming and parallel data fetching."]}),`
`]}),`
`,l(e.h3,{id:"on-mount",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#on-mount",children:l(e.span,{class:"icon icon-link"})}),"On mount"]}),`
`,l(e.p,{children:['There is not an specific "on-mount" hook in Qwik because ',l(e.code,{children:"useTask$()"})," without tracking effectively behaves like a ",l(e.code,{children:"mount"})," hook."]}),`
`,l(e.p,{children:["This is because ",l(e.code,{children:"useTask$"})," runs always at least once when the component is first mounted."]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"useTask$"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#C586C0"},children:"default"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line line--highlighted",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"useTask$"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#569CD6"},children:"async"}),l(e.span,{style:{color:"#D4D4D4"},children:" () "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line line--highlighted",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#6A9955"},children:"// A task without `track` any state effectively behaves like a `on mount` hook."})]}),`
`,l(e.span,{class:"line line--highlighted",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#9CDCFE"},children:"console"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"log"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'Runs once when the component mounts in the server OR client.'"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line line--highlighted",children:l(e.span,{style:{color:"#D4D4D4"},children:"  });"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"div"}),l(e.span,{style:{color:"#808080"},children:">"}),l(e.span,{style:{color:"#D4D4D4"},children:"Hello"}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"div"}),l(e.span,{style:{color:"#808080"},children:">"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"});"})})]})})}),`
`,l(e.p,{children:["One unique aspect of Qwik, is that components are mounted only ONCE across the server and client. This is a property of resumability. What it means, is that if ",l(e.code,{children:"useTask$"})," runs during SSR it will not run again in the browser because Qwik does not hydrate."]}),`
`,l(e.h3,{id:"track",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#track",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"track()"})]}),`
`,l(e.p,{children:["There are times when it is desirable to re-run a task when a component state changes. This is done by using the ",l(e.code,{children:"track()"})," function. The ",l(e.code,{children:"track()"})," function allows you to set up a dependency on a component state on the server (if initially rendered there) and then re-execute the task when the state changes ",l(e.em,{children:"on the browser"})," (the same task will never be executed twice on the server side)."]}),`
`,l(e.blockquote,{children:[`
`,l(e.p,{children:[l(e.strong,{children:"Note"}),": If all you want to do is compute a new state from an existing state synchronously, you should use ",l(e.a,{href:"/docs/components/state/#usecomputed",children:l(e.code,{children:"useComputed$()"})})," instead."]}),`
`]}),`
`,l(n,{src:"/src/routes/demo/tasks/track/index.tsx",style:{height:"6em"},children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"useTask$"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"isServer"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik/build'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#C586C0"},children:"default"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"text"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'Initial text'"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"delayText"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"''"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"useTask$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"track"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#DCDCAA"},children:"track"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"text"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#9CDCFE"},children:"text"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"update"}),l(e.span,{style:{color:"#D4D4D4"},children:" = () "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"delayText"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#9CDCFE"},children:"isServer"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      ? "}),l(e.span,{style:{color:"#DCDCAA"},children:"update"}),l(e.span,{style:{color:"#D4D4D4"},children:"() "}),l(e.span,{style:{color:"#6A9955"},children:"// don't delay on server render value as part of SSR"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      : "}),l(e.span,{style:{color:"#DCDCAA"},children:"delay"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"500"}),l(e.span,{style:{color:"#D4D4D4"},children:")."}),l(e.span,{style:{color:"#DCDCAA"},children:"then"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"update"}),l(e.span,{style:{color:"#D4D4D4"},children:"); "}),l(e.span,{style:{color:"#6A9955"},children:"// Delay in browser"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  });"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"section"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"label"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"        Enter text: "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"input"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"bind"}),l(e.span,{style:{color:"#D4D4D4"},children:":"}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"text"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"/>"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"label"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"p"}),l(e.span,{style:{color:"#808080"},children:">"}),l(e.span,{style:{color:"#D4D4D4"},children:"Delayed text: "}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"delayText"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"p"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"section"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  );"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"});"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"delay"}),l(e.span,{style:{color:"#D4D4D4"},children:" = ("}),l(e.span,{style:{color:"#9CDCFE"},children:"time"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"number"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"new"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4EC9B0"},children:"Promise"}),l(e.span,{style:{color:"#D4D4D4"},children:"(("}),l(e.span,{style:{color:"#9CDCFE"},children:"res"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"setTimeout"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"res"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"time"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]})]})})})}),`
`,l(e.blockquote,{children:[`
`,l(e.p,{children:"On the server:"}),`
`,l(e.ul,{children:[`
`,l(e.li,{children:["The ",l(e.code,{children:"useTask$()"})," runs on the server and the ",l(e.code,{children:"track()"})," function sets up a subscription on ",l(e.code,{children:"text"})," signal."]}),`
`,l(e.li,{children:"The page is rendered."}),`
`]}),`
`,l(e.p,{children:"On the browser:"}),`
`,l(e.ul,{children:[`
`,l(e.li,{children:["The ",l(e.code,{children:"useTask$()"})," does not have to run (or be downloaded) eagerly because Qwik knows that the task is subscribed to the ",l(e.code,{children:"text"})," signal from the server execution."]}),`
`,l(e.li,{children:["When the user types in the input box, the ",l(e.code,{children:"text"})," signal changes. Qwik knows that the ",l(e.code,{children:"useTask$()"})," is subscribed to the ",l(e.code,{children:"text"})," signal and it is at this time that the ",l(e.code,{children:"useTask$()"})," closure is brought into the JavaScript VM to be executed."]}),`
`]}),`
`,l(e.p,{children:["The ",l(e.code,{children:"useTask$()"})]}),`
`,l(e.ul,{children:[`
`,l(e.li,{children:["The ",l(e.code,{children:"useTask$()"})," blocks rendering until it completes. If you don't want to block rendering (as in this case) make sure that the task is resolved, and run the delay work on a separate unconnected promise. (In our case we don't await ",l(e.code,{children:"delay()"}),". Doing so would block rendering.)"]}),`
`]}),`
`]}),`
`,l(e.blockquote,{children:[`
`,l(e.p,{children:["Sometimes it is required to only run code either in the server or in the client. This can be achieved by using the ",l(e.code,{children:"isServer"})," and ",l(e.code,{children:"isBrowser"})," booleans exported from ",l(e.code,{children:"@builder.io/qwik/build"})," as shown above."]}),`
`]}),`
`,l(e.h3,{id:"track-as-a-function",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#track-as-a-function",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"track()"})," as a function"]}),`
`,l(e.p,{children:["In the above example ",l(e.code,{children:"track()"})," was used to track a specific signal. However, ",l(e.code,{children:"track()"})," can also be used as a function to track multiple signals at once."]}),`
`,l(n,{src:"/src/routes/demo/tasks/track-fn/index.tsx",style:{height:"6em"},children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"useTask$"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"isServer"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik/build'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#C586C0"},children:"default"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"isUppercase"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#569CD6"},children:"false"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"text"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"''"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"delayText"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"''"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"useTask$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"track"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"track"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#9CDCFE"},children:"isUppercase"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:" ? "}),l(e.span,{style:{color:"#9CDCFE"},children:"text"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"toUpperCase"}),l(e.span,{style:{color:"#D4D4D4"},children:"() : "}),l(e.span,{style:{color:"#9CDCFE"},children:"text"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#DCDCAA"},children:"toLowerCase"}),l(e.span,{style:{color:"#D4D4D4"},children:"()"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"    );"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"update"}),l(e.span,{style:{color:"#D4D4D4"},children:" = () "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"delayText"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#9CDCFE"},children:"isServer"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      ? "}),l(e.span,{style:{color:"#DCDCAA"},children:"update"}),l(e.span,{style:{color:"#D4D4D4"},children:"() "}),l(e.span,{style:{color:"#6A9955"},children:"// don't delay on server render value as part of SSR"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      : "}),l(e.span,{style:{color:"#DCDCAA"},children:"delay"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"500"}),l(e.span,{style:{color:"#D4D4D4"},children:")."}),l(e.span,{style:{color:"#DCDCAA"},children:"then"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"update"}),l(e.span,{style:{color:"#D4D4D4"},children:"); "}),l(e.span,{style:{color:"#6A9955"},children:"// Delay in browser"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  });"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"section"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"label"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"        Enter text: "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"input"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"bind"}),l(e.span,{style:{color:"#D4D4D4"},children:":"}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"text"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"/>"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"label"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"label"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"        Is uppercase? "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"input"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#CE9178"},children:'"checkbox"'}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"bind"}),l(e.span,{style:{color:"#D4D4D4"},children:":"}),l(e.span,{style:{color:"#9CDCFE"},children:"checked"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"isUppercase"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"/>"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"label"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"p"}),l(e.span,{style:{color:"#808080"},children:">"}),l(e.span,{style:{color:"#D4D4D4"},children:"Delay text: "}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"delayText"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"p"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"section"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  );"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"});"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#569CD6"},children:"function"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"delay"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"time"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"number"}),l(e.span,{style:{color:"#D4D4D4"},children:") {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"new"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4EC9B0"},children:"Promise"}),l(e.span,{style:{color:"#D4D4D4"},children:"(("}),l(e.span,{style:{color:"#9CDCFE"},children:"resolve"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"setTimeout"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"resolve"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"time"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"}"})})]})})})}),`
`,l(e.blockquote,{children:[`
`,l(e.p,{children:["In this example the ",l(e.code,{children:"track()"})," takes a function that not only reads the signal but also transforms its value to uppercase/lowercase. The ",l(e.code,{children:"track()"})," is doing subscription on multiple signals and computes their value."]}),`
`]}),`
`,l(e.h3,{id:"cleanup",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#cleanup",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"cleanup()"})]}),`
`,l(e.p,{children:["Sometimes when running a task cleanup work needs to be performed. When a new task is triggered, the previous task's ",l(e.code,{children:"cleanup()"})," callback is invoked. (Also when the component is removed from the DOM then the ",l(e.code,{children:"cleanup()"})," callback is also invoked.)"]}),`
`,l(e.blockquote,{children:[`
`,l(e.ul,{children:[`
`,l(e.li,{children:["The ",l(e.code,{children:"cleanup()"})," function is not invoked when the task is completed. It is only invoked when a new task is triggered or when the component is removed."]}),`
`,l(e.li,{children:["The ",l(e.code,{children:"cleanup()"})," function is invoked on the server after the applications are serialized into HTML."]}),`
`,l(e.li,{children:["The ",l(e.code,{children:"cleanup()"})," function is not transferable from server to browser. (Cleanup is meant to release resources on the VM where it is running. It is not meant to be transferred to the browser.)"]}),`
`]}),`
`]}),`
`,l(e.p,{children:["This example shows how to implement a debounce feature using the ",l(e.code,{children:"cleanup()"})," function."]}),`
`,l(n,{src:"/src/routes/demo/tasks/cleanup/index.tsx",style:{height:"6em"},children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"useTask$"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#C586C0"},children:"default"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"text"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"''"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"debounceText"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"''"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"useTask$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"track"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"cleanup"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"track"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"text"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"id"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"setTimeout"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"debounceText"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:"), "}),l(e.span,{style:{color:"#B5CEA8"},children:"500"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#DCDCAA"},children:"cleanup"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"clearTimeout"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"id"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  });"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"section"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"label"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"        Enter text: "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"input"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"bind"}),l(e.span,{style:{color:"#D4D4D4"},children:":"}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"text"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"/>"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"label"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"p"}),l(e.span,{style:{color:"#808080"},children:">"}),l(e.span,{style:{color:"#D4D4D4"},children:"Debounced text: "}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"debounceText"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"p"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"section"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  );"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"});"})})]})})})}),`
`,l(e.h2,{id:"usevisibletask",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#usevisibletask",children:l(e.span,{class:"icon icon-link"})}),l(e.code,{children:"useVisibleTask$()"})]}),`
`,l(e.p,{children:["Sometimes a task needs to run only on the browser and after rendering, in that case, you should use ",l(e.code,{children:"useVisibleTask$()"}),". The ",l(e.code,{children:"useVisibleTask$()"})," is similar to ",l(e.code,{children:"useTask$()"})," but it only runs on the browser and after initial rendering. ",l(e.code,{children:"useVisibleTask$()"})," registers a hook to be executed when the component becomes visible in the viewport, it will run at least once in the browser, and it can be reactive and re-execute when some ",l(e.strong,{children:"tracked"})," ",l(e.a,{href:"/docs/components/state/",children:"state"})," changes."]}),`
`,l(e.p,{children:[l(e.code,{children:"useVisibleTask$()"})," has these properties:"]}),`
`,l(e.ul,{children:[`
`,l(e.li,{children:"runs on the client only."}),`
`,l(e.li,{children:"eagerly executes code on the client when the component becomes visible."}),`
`,l(e.li,{children:"runs after initial rendering."}),`
`,l(e.li,{children:"does not block rendering."}),`
`]}),`
`,l(e.blockquote,{children:[`
`,l(e.p,{children:[l(e.strong,{children:"Caution"}),": The ",l(e.code,{children:"useVisibleTask$()"})," should be used as a last resort, because it eagerly executes code on the client. Qwik through ",l(e.a,{href:"",children:"resumability"})," goes out of its way to delay the execution of code on the client, and ",l(e.code,{children:"useVisibleTask$()"})," is an escape hatch that should be used with caution. See ",l(e.a,{href:"/docs/guides/best-practices/#dont-register-events-eagerly-with-usevisibletask",children:"Best Practices"}),` for more details.
If you need to run a task on a client consider `,l(e.code,{children:"useTask$()"})," with a server guard."]}),`
`,l(n,{src:"/src/routes/demo/tasks/track-server-guard/index.tsx",style:{height:"6em"},children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"useTask$"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" { "}),l(e.span,{style:{color:"#9CDCFE"},children:"isServer"}),l(e.span,{style:{color:"#D4D4D4"},children:" } "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik/build'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#C586C0"},children:"default"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"text"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'Initial text'"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"isBold"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#569CD6"},children:"false"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"useTask$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"track"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#DCDCAA"},children:"track"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"text"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#C586C0"},children:"if"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"isServer"}),l(e.span,{style:{color:"#D4D4D4"},children:") {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:"; "}),l(e.span,{style:{color:"#6A9955"},children:"// Server guard"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"    }"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#9CDCFE"},children:"isBold"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"true"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#DCDCAA"},children:"delay"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"1000"}),l(e.span,{style:{color:"#D4D4D4"},children:")."}),l(e.span,{style:{color:"#DCDCAA"},children:"then"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"isBold"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"false"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  });"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"section"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"label"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"        Enter text: "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"input"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"bind"}),l(e.span,{style:{color:"#D4D4D4"},children:":"}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"text"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"/>"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"label"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"p"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"style"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#D4D4D4"},children:"{ "}),l(e.span,{style:{color:"#9CDCFE"},children:"fontWeight:"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"isBold"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:" ? "}),l(e.span,{style:{color:"#CE9178"},children:"'bold'"}),l(e.span,{style:{color:"#D4D4D4"},children:" : "}),l(e.span,{style:{color:"#CE9178"},children:"'normal'"}),l(e.span,{style:{color:"#D4D4D4"},children:" }"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"        Text: "}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"text"}),l(e.span,{style:{color:"#569CD6"},children:"}"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"p"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"section"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  );"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"});"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"delay"}),l(e.span,{style:{color:"#D4D4D4"},children:" = ("}),l(e.span,{style:{color:"#9CDCFE"},children:"time"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"number"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"new"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4EC9B0"},children:"Promise"}),l(e.span,{style:{color:"#D4D4D4"},children:"(("}),l(e.span,{style:{color:"#9CDCFE"},children:"res"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"setTimeout"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"res"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#9CDCFE"},children:"time"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]})]})})})}),`
`,l(e.p,{children:["In the above example the ",l(e.code,{children:"useTask$()"})," is guarded by ",l(e.code,{children:"isServer"}),". The ",l(e.code,{children:"track()"}),` is before the guard which
allows the server to set up the subscription but does not execute any code on the server. The client
then executes the `,l(e.code,{children:"useTask$()"})," once the ",l(e.code,{children:"text"})," signal changes."]}),`
`]}),`
`,l(e.p,{children:["This example shows how to use ",l(e.code,{children:"useVisibleTask$()"})," to initialize a clock on the browser only when the clock component becomes visible."]}),`
`,l(n,{src:"/src/routes/demo/tasks/use-visible-task/index.tsx",style:{height:"6em"},children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"useVisibleTask$"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"Signal"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"} "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#C586C0"},children:"default"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"isClockRunning"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#569CD6"},children:"false"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#808080"},children:"<>"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"div"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"style"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#CE9178"},children:'"position: sticky; top:0"'}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"        Scroll to see clock. (Currently clock is"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"        "}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"isClockRunning"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:" ? "}),l(e.span,{style:{color:"#CE9178"},children:"' running'"}),l(e.span,{style:{color:"#D4D4D4"},children:" : "}),l(e.span,{style:{color:"#CE9178"},children:"' not running'"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#D4D4D4"},children:".)"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"div"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"div"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"style"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#CE9178"},children:'"height: 200vh"'}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"/>"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#4EC9B0"},children:"Clock"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"isRunning"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"isClockRunning"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"/>"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#808080"},children:"</>"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  );"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"});"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"Clock"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:"<{ "}),l(e.span,{style:{color:"#9CDCFE"},children:"isRunning"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"Signal"}),l(e.span,{style:{color:"#D4D4D4"},children:"<"}),l(e.span,{style:{color:"#4EC9B0"},children:"boolean"}),l(e.span,{style:{color:"#D4D4D4"},children:"> }>(({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"isRunning"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"time"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'paused'"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"useVisibleTask$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"cleanup"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#9CDCFE"},children:"isRunning"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"true"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"update"}),l(e.span,{style:{color:"#D4D4D4"},children:" = () "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"time"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"new"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"Date"}),l(e.span,{style:{color:"#D4D4D4"},children:"()."}),l(e.span,{style:{color:"#DCDCAA"},children:"toLocaleTimeString"}),l(e.span,{style:{color:"#D4D4D4"},children:"());"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"id"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"setInterval"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"update"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#B5CEA8"},children:"1000"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#DCDCAA"},children:"cleanup"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"clearInterval"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"id"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  });"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"div"}),l(e.span,{style:{color:"#808080"},children:">"}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"time"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"div"}),l(e.span,{style:{color:"#808080"},children:">"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"});"})})]})})})}),`
`,l(e.blockquote,{children:[`
`,l(e.p,{children:["Notice how the clock's ",l(e.code,{children:"useVisibleTask$()"})," does not run until the ",l(e.code,{children:"<Clock>"})," component became visible. The default behavior of ",l(e.code,{children:"useVisibleTask$()"})," is to run the task when the component becomes visible. This behavior is implemented through ",l(e.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API",children:"intersection observers"}),"."]}),`
`]}),`
`,l(e.h3,{id:"option-eagerness",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#option-eagerness",children:l(e.span,{class:"icon icon-link"})}),"Option ",l(e.code,{children:"eagerness"})]}),`
`,l(e.p,{children:["At times it is desirable to run ",l(e.code,{children:"useVisibleTask$()"})," eagerly as soon as the application is loaded in the browser. In that case the ",l(e.code,{children:"useVisibleTask$()"})," needs to run in eagre mode. This is done by using the ",l(e.code,{children:"{ strategy: 'document-ready' }"}),"."]}),`
`,l(n,{src:"/src/routes/demo/tasks/use-visible-task-eager/index.tsx",style:{height:"6em"},children:l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"import"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"useVisibleTask$"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"type"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"Signal"}),l(e.span,{style:{color:"#D4D4D4"},children:","})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"} "}),l(e.span,{style:{color:"#C586C0"},children:"from"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'@builder.io/qwik'"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#C586C0"},children:"default"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"isClockRunning"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#569CD6"},children:"false"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#808080"},children:"<>"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"div"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"style"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#CE9178"},children:'"position: sticky; top:0"'}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"        Scroll to see clock. (Currently clock is"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"        "}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"isClockRunning"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:" ? "}),l(e.span,{style:{color:"#CE9178"},children:"' running'"}),l(e.span,{style:{color:"#D4D4D4"},children:" : "}),l(e.span,{style:{color:"#CE9178"},children:"' not running'"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#D4D4D4"},children:".)"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"div"}),l(e.span,{style:{color:"#808080"},children:">"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"div"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"style"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#CE9178"},children:'"height: 200vh"'}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"/>"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#4EC9B0"},children:"Clock"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"isRunning"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"isClockRunning"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"/>"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#808080"},children:"</>"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  );"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"});"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"Clock"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:"<{ "}),l(e.span,{style:{color:"#9CDCFE"},children:"isRunning"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"Signal"}),l(e.span,{style:{color:"#D4D4D4"},children:"<"}),l(e.span,{style:{color:"#4EC9B0"},children:"boolean"}),l(e.span,{style:{color:"#D4D4D4"},children:"> }>(({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"isRunning"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"time"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'paused'"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"useVisibleTask$"}),l(e.span,{style:{color:"#D4D4D4"},children:"("})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    ({ "}),l(e.span,{style:{color:"#9CDCFE"},children:"cleanup"}),l(e.span,{style:{color:"#D4D4D4"},children:" }) "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#9CDCFE"},children:"isRunning"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"true"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"update"}),l(e.span,{style:{color:"#D4D4D4"},children:" = () "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"time"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#569CD6"},children:"new"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"Date"}),l(e.span,{style:{color:"#D4D4D4"},children:"()."}),l(e.span,{style:{color:"#DCDCAA"},children:"toLocaleTimeString"}),l(e.span,{style:{color:"#D4D4D4"},children:"());"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"id"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"setInterval"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"update"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#B5CEA8"},children:"1000"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"      "}),l(e.span,{style:{color:"#DCDCAA"},children:"cleanup"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"clearInterval"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#9CDCFE"},children:"id"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"    },"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    { "}),l(e.span,{style:{color:"#9CDCFE"},children:"strategy:"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"'document-ready'"}),l(e.span,{style:{color:"#D4D4D4"},children:" }"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  );"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"div"}),l(e.span,{style:{color:"#808080"},children:">"}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"time"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"div"}),l(e.span,{style:{color:"#808080"},children:">"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"});"})})]})})})}),`
`,l(e.blockquote,{children:[`
`,l(e.p,{children:"In this example the clock starts running immediately on the browser regardless of whether it is visible or not."}),`
`]}),`
`,l(e.h2,{id:"use-hook-rules",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#use-hook-rules",children:l(e.span,{class:"icon icon-link"})}),"Use Hook Rules"]}),`
`,l(e.p,{children:"When using lifecycle hooks, you must adhere to the following rules:"}),`
`,l(e.ul,{children:[`
`,l(e.li,{children:["They can only be called at the root level of ",l(e.code,{children:"component$"})," (not inside conditional blocks)"]}),`
`,l(e.li,{children:["They can only be called at the root of another ",l(e.code,{children:"use*"})," method, allowing for composition."]}),`
`]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#DCDCAA"},children:"useHook"}),l(e.span,{style:{color:"#D4D4D4"},children:"(); "}),l(e.span,{style:{color:"#6A9955"},children:"// <-- ❌ does not work"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#C586C0"},children:"default"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"useCustomHook"}),l(e.span,{style:{color:"#D4D4D4"},children:"(); "}),l(e.span,{style:{color:"#6A9955"},children:"// <-- ✅ does work"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"if"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"condition"}),l(e.span,{style:{color:"#D4D4D4"},children:") {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#DCDCAA"},children:"useHook"}),l(e.span,{style:{color:"#D4D4D4"},children:"(); "}),l(e.span,{style:{color:"#6A9955"},children:"// <-- ❌ does not work"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  }"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"useTask$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#DCDCAA"},children:"useNavigate"}),l(e.span,{style:{color:"#D4D4D4"},children:"(); "}),l(e.span,{style:{color:"#6A9955"},children:"// <-- ❌ does not work"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  });"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"myQrl"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"useHook"}),l(e.span,{style:{color:"#D4D4D4"},children:"()); "}),l(e.span,{style:{color:"#6A9955"},children:"// <-- ❌ does not work"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"button"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"onClick$"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#D4D4D4"},children:"() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"useHook"}),l(e.span,{style:{color:"#D4D4D4"},children:"()"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#808080"},children:"></"}),l(e.span,{style:{color:"#569CD6"},children:"button"}),l(e.span,{style:{color:"#808080"},children:">"}),l(e.span,{style:{color:"#D4D4D4"},children:"; "}),l(e.span,{style:{color:"#6A9955"},children:"// <-- ❌ does not work"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"});"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#569CD6"},children:"function"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"useCustomHook"}),l(e.span,{style:{color:"#D4D4D4"},children:"() {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#DCDCAA"},children:"useHook"}),l(e.span,{style:{color:"#D4D4D4"},children:"(); "}),l(e.span,{style:{color:"#6A9955"},children:"// <-- ✅ does work"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"if"}),l(e.span,{style:{color:"#D4D4D4"},children:" ("}),l(e.span,{style:{color:"#9CDCFE"},children:"condition"}),l(e.span,{style:{color:"#D4D4D4"},children:") {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#DCDCAA"},children:"useHook"}),l(e.span,{style:{color:"#D4D4D4"},children:"(); "}),l(e.span,{style:{color:"#6A9955"},children:"// <-- ❌ does not work"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  }"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"}"})})]})})})]})}function a(s={}){const{wrapper:e}=s.components||{};return e?l(e,Object.assign({},s,{children:l(c,s)})):c(s)}const y=()=>r(o,{children:r(a,{},3,null)},3,"u7s4mcyV");export{y as default,p as frontmatter,h as head,d as headings};
