import{d as r,F as c,H as l,g as s}from"./q-71956c83.js";const i=[{text:"Optimizer",id:"optimizer",level:1},{text:"Serialization",id:"serialization",level:2}],d={title:"Optimizer Rules",meta:[],styles:[],links:[],frontmatter:{contributors:["the-r3aper7","manucorporat","adamdbradley","mhevery"]}},D={title:"Optimizer Rules",contributors:["the-r3aper7","manucorporat","adamdbradley","mhevery"]};function o(n){const e=Object.assign({h1:"h1",a:"a",span:"span",p:"p",code:"code",div:"div",pre:"pre",h2:"h2"},n.components);return l(s,{children:[l(e.h1,{id:"optimizer",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#optimizer",children:l(e.span,{class:"icon icon-link"})}),"Optimizer"]}),`
`,l(e.p,{children:"Qwik's philosophy is to delay loading code for as long as possible. To do that, Qwik relies on Optimizer to re-arrange the code for lazy loading. The Optimizer is code level transformation that runs as part of the rollup. (Optimizer is written in Rust (and available as WASM) for instant performance)"}),`
`,l(e.p,{children:["The Optimizer looks for ",l(e.code,{children:"$"})," and applies a transformation that extracts the expression following the ",l(e.code,{children:"$"})," and turns it into a lazy-loadable and importable symbol."]}),`
`,l(e.p,{children:["Let's start by looking at a simple ",l(e.code,{children:"Counter"})," example:"]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"Counter"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"count"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"0"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"button"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"onClick$"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#D4D4D4"},children:"() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"count"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:"++"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#808080"},children:">"}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"count"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"button"}),l(e.span,{style:{color:"#808080"},children:">"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"});"})})]})})}),`
`,l(e.p,{children:"The above code represents what a developer would write to describe the component. Below are the transformations that the Optimizer applies to the code to make the code lazy-loadable."}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:l(e.span,{class:"line",children:[l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"Counter"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"component"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#DCDCAA"},children:"qrl"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'./chunk-a.js'"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#CE9178"},children:"'Counter_onMount'"}),l(e.span,{style:{color:"#D4D4D4"},children:"));"})]})})})}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:[l(e.div,{"data-rehype-pretty-code-title":"","data-language":"tsx","data-theme":"default",children:"chunk-a.js"}),l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"Counter_onMount"}),l(e.span,{style:{color:"#D4D4D4"},children:" = () "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"count"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"useSignal"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#B5CEA8"},children:"0"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"button"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"onClick$"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#DCDCAA"},children:"qrl"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'./chunk-b.js'"}),l(e.span,{style:{color:"#D4D4D4"},children:", "}),l(e.span,{style:{color:"#CE9178"},children:"'Counter_onClick'"}),l(e.span,{style:{color:"#D4D4D4"},children:", ["}),l(e.span,{style:{color:"#9CDCFE"},children:"count"}),l(e.span,{style:{color:"#D4D4D4"},children:"])"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#808080"},children:">"}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"count"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"button"}),l(e.span,{style:{color:"#808080"},children:">"}),l(e.span,{style:{color:"#D4D4D4"},children:";"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:[l(e.div,{"data-rehype-pretty-code-title":"","data-language":"tsx","data-theme":"default",children:"chunk-b.js"}),l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#DCDCAA"},children:"Counter_onClick"}),l(e.span,{style:{color:"#D4D4D4"},children:" = () "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" ["}),l(e.span,{style:{color:"#4FC1FF"},children:"count"}),l(e.span,{style:{color:"#D4D4D4"},children:"] = "}),l(e.span,{style:{color:"#DCDCAA"},children:"useLexicalScope"}),l(e.span,{style:{color:"#D4D4D4"},children:"();"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#C586C0"},children:"return"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"count"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"value"}),l(e.span,{style:{color:"#D4D4D4"},children:"++;"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"};"})})]})})]}),`
`,l(e.p,{children:["Notice that every occurrence of ",l(e.code,{children:"$"})," results in a new lazy loadable symbol."]}),`
`,l(e.h2,{id:"serialization",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#serialization",children:l(e.span,{class:"icon icon-link"})}),"Serialization"]}),`
`,l(e.p,{children:["See ",l(e.a,{href:"/docs/concepts/resumable/#serialization",children:"serialization"})," for a discussion of what is serializable."]})]})}function a(n={}){const{wrapper:e}=n.components||{};return e?l(e,Object.assign({},n,{children:l(o,n)})):o(n)}const h=()=>r(c,{children:r(a,{},3,null)},3,"cpbNbDcD");export{h as default,D as frontmatter,d as head,i as headings};
