import{d as r,F as t,H as l,g as i}from"./q-71956c83.js";const c=[{text:"Azure Static Web Apps Middleware",id:"azure-static-web-apps-middleware",level:1},{text:"Installation",id:"installation",level:2},{text:"Production build",id:"production-build",level:2},{text:"Deploy to Azure",id:"deploy-to-azure",level:2}],s={title:"Qwik City - Azure Static Web Apps",meta:[],styles:[],links:[],frontmatter:{contributors:["derkoe","manucorporat","reemardelarosa","mhevery"]}},h={title:"Qwik City - Azure Static Web Apps",contributors:["derkoe","manucorporat","reemardelarosa","mhevery"]};function a(n){const e=Object.assign({h1:"h1",a:"a",span:"span",p:"p",h2:"h2",code:"code",div:"div",pre:"pre",ol:"ol",li:"li",ul:"ul"},n.components);return l(i,{children:[l(e.h1,{id:"azure-static-web-apps-middleware",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#azure-static-web-apps-middleware",children:l(e.span,{class:"icon icon-link"})}),"Azure Static Web Apps Middleware"]}),`
`,l(e.p,{children:["Qwik City Azure Static Web Apps middleware allows you to connect Qwik City to ",l(e.a,{href:"https://learn.microsoft.com/azure/static-web-apps/",children:"Azure Static Web Apps"}),"."]}),`
`,l(e.h2,{id:"installation",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#installation",children:l(e.span,{class:"icon icon-link"})}),"Installation"]}),`
`,l(e.p,{children:["To integrate the ",l(e.code,{children:"azure-swa"})," adapter, use the ",l(e.code,{children:"add"})," command:"]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"shell","data-theme":"default",children:l(e.code,{"data-language":"shell","data-theme":"default",children:l(e.span,{class:"line",children:[l(e.span,{style:{color:"#DCDCAA"},children:"npm"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"run"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"qwik"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"add"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"azure-swa"})]})})})}),`
`,l(e.p,{children:["The adapter will add a new ",l(e.code,{children:"vite.config.ts"})," within the ",l(e.code,{children:"adapters/"})," directory, and a new entry file will be created, such as:"]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"shell","data-theme":"default",children:l(e.code,{"data-language":"shell","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#DCDCAA"},children:"└──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"adapters/"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#DCDCAA"},children:"└──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"azure-swa/"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"        "}),l(e.span,{style:{color:"#DCDCAA"},children:"└──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"vite.config.ts"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#DCDCAA"},children:"└──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"src/"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#DCDCAA"},children:"└──"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"entry.azure-swa.tsx"})]})]})})}),`
`,l(e.p,{children:["Additionally, within the ",l(e.code,{children:"package.json"}),", the ",l(e.code,{children:"build.server"})," and ",l(e.code,{children:"deploy"})," scripts will be updated."]}),`
`,l(e.h2,{id:"production-build",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#production-build",children:l(e.span,{class:"icon icon-link"})}),"Production build"]}),`
`,l(e.p,{children:["To build the application for production, use the ",l(e.code,{children:"build"})," command, this command will automatically run ",l(e.code,{children:"npm run build.server"})," and ",l(e.code,{children:"npm run build.client"}),":"]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"shell","data-theme":"default",children:l(e.code,{"data-language":"shell","data-theme":"default",children:l(e.span,{class:"line",children:[l(e.span,{style:{color:"#DCDCAA"},children:"npm"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"run"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"build"})]})})})}),`
`,l(e.h2,{id:"deploy-to-azure",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#deploy-to-azure",children:l(e.span,{class:"icon icon-link"})}),"Deploy to Azure"]}),`
`,l(e.p,{children:["After installing the integration using ",l(e.code,{children:"npm run qwik add azure-swa"})," the project is ready to be deployed to Azure Static Web Apps."]}),`
`,l(e.p,{children:"There are three ways to deploy:"}),`
`,l(e.ol,{children:[`
`,l(e.li,{children:[`
`,l(e.p,{children:["Deploy with ",l(e.a,{href:"https://azure.github.io/static-web-apps-cli/",children:"Static Web Apps CLI"})]}),`
`,l(e.p,{children:"You can deploy your application from your local environment with:"}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"shell","data-theme":"default",children:l(e.code,{"data-language":"shell","data-theme":"default",children:l(e.span,{class:"line",children:[l(e.span,{style:{color:"#DCDCAA"},children:"npx"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"swa"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"deploy"})]})})})}),`
`,l(e.p,{children:"This will start a wizard which will guide you through login and deployment to Azure."}),`
`]}),`
`,l(e.li,{children:[`
`,l(e.p,{children:"Deploy from GitHub"}),`
`,l(e.p,{children:"You can deploy your application via GitHub. Create a Git repository, commit all your code and then publish your branch to GitHub."}),`
`,l(e.p,{children:'Create an Azure Static Webapp via the Azure Portal and choose the GitHub repository in the deployment details. When prompted for the build details choose "Custom" and set the following values:'}),`
`,l(e.ul,{children:[`
`,l(e.li,{children:'App location: "."'}),`
`,l(e.li,{children:'Api location: "./azure-functions"'}),`
`,l(e.li,{children:'Output location: "./dist"'}),`
`]}),`
`,l(e.p,{children:"This will setup a GitHub workflow in your repository that will deploy your application for the main branch and each pull request."}),`
`,l(e.p,{children:'The resulting workflow file has to be adapted by adding the following to the "Repository/Build Configurations" block:'}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"text","data-theme":"default",children:l(e.code,{"data-language":"text","data-theme":"default",children:l(e.span,{class:"line",children:[l(e.span,{style:{backgroundColor:"rgb(0 103 163 / 56%)",color:"rgb(175 255 255 / 100%)"},class:"word",children:"skip_api_build"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{backgroundColor:"rgb(100 50 255 / 35%)",color:"rgb(225 200 255 / 100%)"},class:"word",children:"true"})]})})})}),`
`,l(e.p,{children:["Checkout ",l(e.a,{href:"https://learn.microsoft.com/azure/static-web-apps/get-started-portal?pivots=github",children:"Azure Static Web Apps quickstart"})," for more information."]}),`
`]}),`
`,l(e.li,{children:[`
`,l(e.p,{children:"Deploy from any CI system"}),`
`,l(e.p,{children:["You can deploy to Azure Static Web Apps with any CI system by setting the environment variable ",l(e.code,{children:"SWA_CLI_DEPLOYMENT_TOKEN"})," with the Azure SWA deployment token and the run the following command from your pipeline:"]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"shell","data-theme":"default",children:l(e.code,{"data-language":"shell","data-theme":"default",children:l(e.span,{class:"line",children:[l(e.span,{style:{color:"#DCDCAA"},children:"swa"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"deploy"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"./dist"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"--api-location"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"./azure-functions"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"--env"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#CE9178"},children:"production"})]})})})}),`
`]}),`
`]}),`
`,l(e.p,{children:["Notice, that you will need an ",l(e.a,{href:"https://signup.azure.com/",children:"Azure account"})," in order to complete this step!"]})]})}function o(n={}){const{wrapper:e}=n.components||{};return e?l(e,Object.assign({},n,{children:l(a,n)})):a(n)}const p=()=>r(t,{children:r(o,{},3,null)},3,"mRtPD7Ry");export{p as default,h as frontmatter,s as head,c as headings};
