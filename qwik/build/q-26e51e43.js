import{d as c,F as o,H as l,g as s}from"./q-71956c83.js";const i=[{text:"QRLs",id:"qrls",level:2},{text:"Declaring callback props",id:"declaring-callback-props",level:2},{text:"Using callback props",id:"using-callback-props",level:2}],d={title:"Passing Closures",meta:[],styles:[],links:[],frontmatter:{contributors:["adamdbradley","Nico385412","the-r3aper7","jmmon","manucorporat","mhevery","Arthur-Fedotiev"]}},h={title:"Passing Closures",contributors:["adamdbradley","Nico385412","the-r3aper7","jmmon","manucorporat","mhevery","Arthur-Fedotiev"]};function r(n){const e=Object.assign({p:"p",code:"code",h2:"h2",a:"a",span:"span",ul:"ul",li:"li",div:"div",pre:"pre"},n.components);return l(s,{children:[l(e.p,{children:["Props must be serializable so that Qwik can resume and render each component independently from other components on the page. This poses a problem if we wish to pass a callback to a child component. Callbacks are functions and functions are not directly serializable, but they are serializable through the ",l(e.code,{children:"$()"})," by converting them to QRLs first."]}),`
`,l(e.h2,{id:"qrls",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#qrls",children:l(e.span,{class:"icon icon-link"})}),"QRLs"]}),`
`,l(e.p,{children:["Functions passing across serializable boundaries must be done through QRLs. QRLs are serialized forms of a function. (See ",l(e.a,{href:"/docs/advanced/qrl/",children:"QRL"})," in the advanced section.)"]}),`
`,l(e.p,{children:["Qwik has convenience APIs that end in ",l(e.code,{children:"$"})," - these are equivalent to calling ",l(e.code,{children:"$()"})," directly. These two lines are equivalent:"]}),`
`,l(e.ul,{children:[`
`,l(e.li,{children:["inline: ",l(e.code,{children:"useTask$(() => {...}/>"})]}),`
`,l(e.li,{children:["explicit: ",l(e.code,{children:"const callbackQrl = $(() => {...}); useTaskQrl(callbackQrl)"})]}),`
`]}),`
`,l(e.p,{children:"Most of the time we use the first form as it allows us to inline our callbacks directly into the API. But at times it is necessary to use the second form so that we can separate where the function is declared from where it is used."}),`
`,l(e.h2,{id:"declaring-callback-props",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#declaring-callback-props",children:l(e.span,{class:"icon icon-link"})}),"Declaring callback props"]}),`
`,l(e.p,{children:"A component can declare a callback in its props by:"}),`
`,l(e.ul,{children:[`
`,l(e.li,{children:["Property that ends in ",l(e.code,{children:"$"})," (as in ",l(e.code,{children:"goodbye$"}),")"]}),`
`,l(e.li,{children:["The type of the property is ",l(e.code,{children:"PropFunction<T>"})," where ",l(e.code,{children:"T"})," is the lazy reference type that the QRL points to (function signature)."]}),`
`]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"tsx","data-theme":"default",children:l(e.code,{"data-language":"tsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#569CD6"},children:"interface"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4EC9B0"},children:"MyComponentProps"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"goodbye$"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"PropFunction"}),l(e.span,{style:{color:"#D4D4D4"},children:"<() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4EC9B0"},children:"void"}),l(e.span,{style:{color:"#D4D4D4"},children:">;"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"hello$"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"PropFunction"}),l(e.span,{style:{color:"#D4D4D4"},children:"<() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4EC9B0"},children:"void"}),l(e.span,{style:{color:"#D4D4D4"},children:">;"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"}"})}),`
`,l(e.span,{class:"line",children:" "}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#C586C0"},children:"export"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#569CD6"},children:"const"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#4FC1FF"},children:"MyComponent"}),l(e.span,{style:{color:"#D4D4D4"},children:" = "}),l(e.span,{style:{color:"#DCDCAA"},children:"component$"}),l(e.span,{style:{color:"#D4D4D4"},children:"(("}),l(e.span,{style:{color:"#9CDCFE"},children:"props"}),l(e.span,{style:{color:"#D4D4D4"},children:": "}),l(e.span,{style:{color:"#4EC9B0"},children:"MyComponentProps"}),l(e.span,{style:{color:"#D4D4D4"},children:") "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" { ... });"})]})]})})}),`
`,l(e.p,{children:["This allows the user of ",l(e.code,{children:"<MyComponent>"})," to use ",l(e.code,{children:"goodbye$"})," form as shown here:"]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"jsx","data-theme":"default",children:l(e.code,{"data-language":"jsx","data-theme":"default",children:l(e.span,{class:"line",children:[l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#4EC9B0"},children:"MyComponent"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"goodbye$"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"goodbyeQrl"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"hello$"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#D4D4D4"},children:"() "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {...}"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#808080"},children:"/>"})]})})})}),`
`,l(e.h2,{id:"using-callback-props",children:[l(e.a,{"aria-hidden":"true",tabindex:"-1",href:"#using-callback-props",children:l(e.span,{class:"icon icon-link"})}),"Using callback props"]}),`
`,l(e.p,{children:["Notice that the ",l(e.code,{children:"<MyComponent>"})," component receives a callback function."]}),`
`,l(e.p,{children:["Passing the ",l(e.code,{children:"props.goodbye$"})," as a reference to the ",l(e.code,{children:"<button>"})]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"jsx","data-theme":"default",children:l(e.code,{"data-language":"jsx","data-theme":"default",children:l(e.span,{class:"line",children:[l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"button"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"onClick$"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#569CD6"},children:"{"}),l(e.span,{style:{color:"#9CDCFE"},children:"props"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"goodbye$"}),l(e.span,{style:{color:"#569CD6"},children:"}"}),l(e.span,{style:{color:"#808080"},children:">"}),l(e.span,{style:{color:"#D4D4D4"},children:"good bye"}),l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"button"}),l(e.span,{style:{color:"#808080"},children:">"})]})})})}),`
`,l(e.p,{children:["Creating a new callback for ",l(e.code,{children:"<button>"})," and internally invoking the callback QRL."]}),`
`,l(e.div,{"data-rehype-pretty-code-fragment":"",children:l(e.pre,{"data-language":"jsx","data-theme":"default",children:l(e.code,{"data-language":"jsx","data-theme":"default",children:[l(e.span,{class:"line",children:[l(e.span,{style:{color:"#808080"},children:"<"}),l(e.span,{style:{color:"#569CD6"},children:"button"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  "}),l(e.span,{style:{color:"#9CDCFE"},children:"onClick$"}),l(e.span,{style:{color:"#D4D4D4"},children:"="}),l(e.span,{style:{color:"#569CD6"},children:"{async"}),l(e.span,{style:{color:"#D4D4D4"},children:" () "}),l(e.span,{style:{color:"#569CD6"},children:"=>"}),l(e.span,{style:{color:"#D4D4D4"},children:" {"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"    "}),l(e.span,{style:{color:"#C586C0"},children:"await"}),l(e.span,{style:{color:"#D4D4D4"},children:" "}),l(e.span,{style:{color:"#9CDCFE"},children:"props"}),l(e.span,{style:{color:"#D4D4D4"},children:"."}),l(e.span,{style:{color:"#9CDCFE"},children:"hello$"}),l(e.span,{style:{color:"#D4D4D4"},children:"?."}),l(e.span,{style:{color:"#DCDCAA"},children:"invoke"}),l(e.span,{style:{color:"#D4D4D4"},children:"("}),l(e.span,{style:{color:"#CE9178"},children:"'World'"}),l(e.span,{style:{color:"#D4D4D4"},children:");"})]}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#D4D4D4"},children:"  }"}),l(e.span,{style:{color:"#569CD6"},children:"}"})]}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#808080"},children:">"})}),`
`,l(e.span,{class:"line",children:l(e.span,{style:{color:"#D4D4D4"},children:"  hello"})}),`
`,l(e.span,{class:"line",children:[l(e.span,{style:{color:"#808080"},children:"</"}),l(e.span,{style:{color:"#569CD6"},children:"button"}),l(e.span,{style:{color:"#808080"},children:">"})]})]})})}),`
`,l(e.p,{children:["This form allows the ",l(e.code,{children:"<button>"})," to invoke the callback with custom parameters. Notice that the invocation requires ",l(e.code,{children:"async"})," and ",l(e.code,{children:"await"})," as the QRLs are lazy-loaded."]})]})}function a(n={}){const{wrapper:e}=n.components||{};return e?l(e,Object.assign({},n,{children:l(r,n)})):r(n)}const p=()=>c(o,{children:c(a,{},3,null)},3,"I0TXMUYu");export{p as default,h as frontmatter,d as head,i as headings};
